package com.spritechase.ui{	import flash.events.Event;	import flash.events.MouseEvent;	import flash.text.TextField;	import flash.display.MovieClip;		import com.spritechase.core.*;		public class VideoScreen extends UIScreen	{				//Stage members		public var modelName_txt:TextField;		public var instructions_txt:TextField;		public var label_txt:TextField;		public var prev_btn:MovieClip;		public var next_btn:MovieClip;				//Private members		private var index:int = -1;		private var data:XMLList;		private var modelCt:int = 0;				override protected function init():void		{			prev_btn.addEventListener(MouseEvent.CLICK, prevModel);			next_btn.addEventListener(MouseEvent.CLICK, nextModel);		}				override public function update(newData:KioskData):void		{			super.update(newData);			data = newData.data..section.(@id == 'video');			index = -1;			modelCt = data..model.length();			trace('+++++ modelCt = ' + modelCt);						nextModel();		}				private function nextModel(e:Event = null):void		{			trace('nextModel()');						if(modelCt == 0)			{				showModel('question_mark');			}						else			{				index++;				if(index == modelCt) index = 0;				showModel(data..model[index].@id);			}		}				private function prevModel(e:Event = null):void		{			trace('prevModel()');						if(modelCt == 0)			{				showModel('question_mark');			}						else			{				index--;				if(index < 0) index = modelCt - 1;				showModel(data..model[index].@id);			}					}				private function showModel(id:String):void		{			//$$testme if there's no model data to load, fall back to the question mark.			if(KioskConfig.data..model.(@id == id) == '') id = 'question_mark';						var modelName:String = KioskConfig.data..model.(@id == id).param.(@id == 'name');						//$$debug why am I not seeing my model's name?			trace('KioskAR.showModel(). model id, name: ' + KioskConfig.data..model.(@id == id) + ', ' + modelName);						modelName_txt.text = modelName;			dispatchEvent(new KioskEvent(KioskEvent.NEW_MODEL_SELECTED, {"id": id }));		}				override public function idle():void		{			super.idle();			modelName_txt.text = "...";			dispatchEvent(new KioskEvent(KioskEvent.IDLE));		}	}}